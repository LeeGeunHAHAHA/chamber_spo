#!/bin/bash
# Identify

nvme reset $FQA_DEVICE

echo "[Identify receive - return parameters]"
echo "----------Invalid ns----------"
nvme dir-receive $FQA_DEVICE -n 0 -D 0 -O 1 -H
nvme dir-receive $FQA_DEVICE -n 129 -D 0 -O 1 -H

echo "----------Valid ns----------"
nvme dir-receive $FQA_DEVICE -n 1 -D 0 -O 1 -H
nvme dir-receive $FQA_DEVICE -n 128 -D 0 -O 1 -H

echo "[Identify send - enable directive]"
echo "----------Invalid ns---------"
nvme dir-send $FQA_DEVICE -n 0 -D 0 -O 1 -T 1 -e 1 -H
nvme dir-send $FQA_DEVICE -n 129 -D 0 -O 1 -T 1 -e 1 -H

echo "----------Invalid type----------"
nvme dir-send $FQA_DEVICE -n 1 -D 0 -O 1 -T 0 -e 0 -H
nvme dir-send $FQA_DEVICE -n 1 -D 0 -O 1 -T 0 -e 1 -H

echo "----------Valid ns----------"
nvme dir-send $FQA_DEVICE -n 1 -D 0 -O 1 -T 1 -e 1 -H
nvme dir-receive $FQA_DEVICE -n 1 -D 0 -O 1 -H
nvme dir-send $FQA_DEVICE -n 128 -D 0 -O 1 -T 1 -e 1 -H
nvme dir-receive $FQA_DEVICE -n 128 -D 0 -O 1 -H

echo "-----------nsid 0xFFFFFFFF----------"
nvme dir-send $FQA_DEVICE -n 0xffffffff -D 0 -O 1 -T 1 -e 0 -H
nvme dir-receive $FQA_DEVICE -n 1 -D 0 -O 1 -H
nvme dir-receive $FQA_DEVICE -n 128 -D 0 -O 1 -H
nvme dir-send $FQA_DEVICE -n 0xffffffff -D 0 -O 1 -T 1 -e 1 -H
