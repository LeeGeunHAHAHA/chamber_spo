#!/bin/bash
source ../common
GROUP_TITLE="multiple operation test(16 namespaces)"
PARAM_FILE=parameter_ns16
TITLE='OPERATION=$OPERATION IOSIZE=512B_LBA:$IOSIZE_512B,4KB_LBA:$IOSIZE_4KB IODEPTH=$IODEPTH'
MULTI_NS=1

if [[ -n $STATIC_AMOUNT ]]; then
	export AMOUNT=$STATIC_AMOUNT
fi

group_init $@

run_config
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=32 SEED=1 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=32 SEED=1 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=128 SEED=2 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=128 SEED=2 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=512 SEED=3 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=512 SEED=3 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=2048 SEED=4 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=4096 IOSIZE_512B=512 IODEPTH=2048 SEED=4 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=32 SEED=5 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=32 SEED=5 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=128 SEED=6 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=128 SEED=6 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=512 SEED=7 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=512 SEED=7 run_test
if [[ $IOENGINE != "spdk" ]]; then
AMOUNT_SCALE=1 OPERATION=write IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=2048 SEED=8 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE_4KB=$MDTS IOSIZE_512B=$MDTS IODEPTH=2048 SEED=8 run_test
fi
