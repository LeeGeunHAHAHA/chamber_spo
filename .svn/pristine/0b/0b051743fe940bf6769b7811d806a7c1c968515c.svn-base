#!/bin/bash
source ../common
GROUP_TITLE="multiple operation test"
PARAM_FILE=parameter
TITLE='OPERATION=$OPERATION IOSIZE=$IOSIZE IODEPTH=$IODEPTH'

if [[ -n $STATIC_AMOUNT ]]; then
	export AMOUNT=$STATIC_AMOUNT
fi

group_init $@

run_config
AMOUNT_SCALE=1 OPERATION=write IOSIZE=$NAMESPACE_BSZ IODEPTH=32 SEED=1 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE=$NAMESPACE_BSZ IODEPTH=32 SEED=1 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE=$NAMESPACE_BSZ IODEPTH=128 SEED=2 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE=$NAMESPACE_BSZ IODEPTH=128 SEED=2 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE=$NAMESPACE_BSZ IODEPTH=512 SEED=3 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE=$NAMESPACE_BSZ IODEPTH=512 SEED=3 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE=$NAMESPACE_BSZ IODEPTH=2048 SEED=4 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE=$NAMESPACE_BSZ IODEPTH=2048 SEED=4 run_test
AMOUNT_SCALE=1 OPERATION=write IOSIZE=$MDTS IODEPTH=32 SEED=5 run_test
AMOUNT_SCALE=1 OPERATION=read IOSIZE=$MDTS IODEPTH=32 SEED=5 run_test
if [[ $IOENGINE != "spdk" ]]; then
 AMOUNT_SCALE=1 OPERATION=write IOSIZE=$MDTS IODEPTH=128 SEED=6 run_test
 AMOUNT_SCALE=1 OPERATION=read IOSIZE=$MDTS IODEPTH=128 SEED=6 run_test
 AMOUNT_SCALE=1 OPERATION=write IOSIZE=$MDTS IODEPTH=512 SEED=7 run_test
 AMOUNT_SCALE=1 OPERATION=read IOSIZE=$MDTS IODEPTH=512 SEED=7 run_test
 AMOUNT_SCALE=1 OPERATION=write IOSIZE=$MDTS IODEPTH=2048 SEED=8 run_test
 AMOUNT_SCALE=1 OPERATION=read IOSIZE=$MDTS IODEPTH=2048 SEED=8 run_test
fi
